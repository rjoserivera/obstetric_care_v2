{% extends 'Shared/base.html' %}
{% load static %}

{% block title %}Detalle de Persona - {{ persona.Nombre }}{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row mb-4">
        <div class="col-lg-12">
            <a href="{% url 'core:personas_list' %}" style="color: #667eea; text-decoration: none; font-weight: 600;">
                <i class="bi bi-arrow-left"></i> Volver al listado
            </a>
        </div>
    </div>

    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            <!-- Encabezado -->
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem; border-radius: 12px; margin-bottom: 2rem;">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <div style="background: rgba(255,255,255,0.2); width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.8rem;">
                        <i class="bi bi-person-fill"></i>
                    </div>
                    <div>
                        <h1 style="margin: 0; font-size: 1.8rem; font-weight: 800;">{{ persona.Nombre }} {{ persona.Apellido_Paterno }}</h1>
                        <p style="margin: 0.5rem 0 0 0; opacity: 0.9;">{{ persona.Apellido_Materno }}</p>
                    </div>
                </div>
            </div>

            <!-- Datos Personales -->
            <div class="card mb-4" style="border: none; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                <div class="card-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; font-weight: 700; border-radius: 12px 12px 0 0;">
                    <i class="bi bi-person-fill"></i> Datos Personales
                </div>
                <div class="card-body p-4">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label style="font-weight: 700; color: #2c3e50; font-size: 0.9rem; text-transform: uppercase; opacity: 0.7;">RUT</label>
                            <p style="margin: 0.5rem 0 0 0; color: #2c3e50; font-size: 1.1rem; font-weight: 600;">{{ persona.Rut }}</p>
                        </div>
                        <div class="col-md-6">
                            <label style="font-weight: 700; color: #2c3e50; font-size: 0.9rem; text-transform: uppercase; opacity: 0.7;">Género</label>
                            <p style="margin: 0.5rem 0 0 0; color: #2c3e50; font-size: 1.1rem; font-weight: 600;">{{ persona.Sexo }}</p>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label style="font-weight: 700; color: #2c3e50; font-size: 0.9rem; text-transform: uppercase; opacity: 0.7;">Fecha de Nacimiento</label>
                            <p style="margin: 0.5rem 0 0 0; color: #2c3e50; font-size: 1.1rem; font-weight: 600;">{{ persona.Fecha_nacimiento|date:"d/m/Y" }}</p>
                        </div>
                        <div class="col-md-6">
                            <label style="font-weight: 700; color: #2c3e50; font-size: 0.9rem; text-transform: uppercase; opacity: 0.7;">Edad</label>
                            <p style="margin: 0.5rem 0 0 0; color: #2c3e50; font-size: 1.1rem; font-weight: 600;">
                                {% widthratio persona.Fecha_nacimiento now "days" as age_days %}
                                {{ age_days|divisibleby:"365" }} años
                            </p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <label style="font-weight: 700; color: #2c3e50; font-size: 0.9rem; text-transform: uppercase; opacity: 0.7;">Email</label>
                            <p style="margin: 0.5rem 0 0 0; color: #2c3e50; font-size: 1.1rem;">
                                {% if persona.Email %}
                                    <a href="mailto:{{ persona.Email }}" style="color: #667eea; text-decoration: none;">{{ persona.Email }}</a>
                                {% else %}
                                    <span style="color: #ccc;">No registrado</span>
                                {% endif %}
                            </p>
                        </div>
                        <div class="col-md-6">
                            <label style="font-weight: 700; color: #2c3e50; font-size: 0.9rem; text-transform: uppercase; opacity: 0.7;">Teléfono</label>
                            <p style="margin: 0.5rem 0 0 0; color: #2c3e50; font-size: 1.1rem; font-weight: 600;">{{ persona.Telefono }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Domicilio -->
            <div class="card mb-4" style="border: none; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                <div class="card-header" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; font-weight: 700; border-radius: 12px 12px 0 0;">
                    <i class="bi bi-house-fill"></i> Domicilio
                </div>
                <div class="card-body p-4">
                    <div class="row mb-3">
                        <div class="col-md-8">
                            <label style="font-weight: 700; color: #2c3e50; font-size: 0.9rem; text-transform: uppercase; opacity: 0.7;">Dirección</label>
                            <p style="margin: 0.5rem 0 0 0; color: #2c3e50; font-size: 1.1rem; font-weight: 600;">{{ persona.Direccion }}</p>
                        </div>
                        <div class="col-md-4">
                            <label style="font-weight: 700; color: #2c3e50; font-size: 0.9rem; text-transform: uppercase; opacity: 0.7;">Comuna</label>
                            <p style="margin: 0.5rem 0 0 0; color: #2c3e50; font-size: 1.1rem; font-weight: 600;">{{ persona.Comuna }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Registro -->
            <div class="card mb-4" style="border: none; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
                <div class="card-header" style="background: #f3f4f6; color: #2c3e50; font-weight: 700; border-radius: 12px 12px 0 0;">
                    <i class="bi bi-clock-history"></i> Información del Registro
                </div>
                <div class="card-body p-4">
                    <div class="row">
                        <div class="col-md-6">
                            <label style="font-weight: 700; color: #2c3e50; font-size: 0.9rem; text-transform: uppercase; opacity: 0.7;">Fecha de Creación</label>
                            <p style="margin: 0.5rem 0 0 0; color: #2c3e50; font-size: 1rem;">{{ persona.fecha_creacion|date:"d/m/Y H:i" }}</p>
                        </div>
                        <div class="col-md-6">
                            <label style="font-weight: 700; color: #2c3e50; font-size: 0.9rem; text-transform: uppercase; opacity: 0.7;">Última Actualización</label>
                            <p style="margin: 0.5rem 0 0 0; color: #2c3e50; font-size: 1rem;">{{ persona.fecha_actualizacion|date:"d/m/Y H:i" }}</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Acciones -->
            <div style="display: flex; gap: 1rem; margin-bottom: 2rem;">
                <a href="{% url 'core:personas_edit' persona.id %}" class="btn btn-lg" style="background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%); color: white; font-weight: 600; flex: 1; border-radius: 8px;">
                    <i class="bi bi-pencil-square"></i> Editar Persona
                </a>
                <a href="{% url 'core:personas_delete' persona.id %}" class="btn btn-lg" style="background: linear-gradient(135deg, #ef4444 0%, #991b1b 100%); color: white; font-weight: 600; flex: 1; border-radius: 8px;" onclick="return confirm('¿Estás seguro de que deseas eliminar esta persona?');">
                    <i class="bi bi-trash"></i> Eliminar
                </a>
                <a href="{% url 'core:personas_list' %}" class="btn btn-lg" style="background: #f3f4f6; color: #2c3e50; border: 1px solid #e5e7eb; font-weight: 600; flex: 1; border-radius: 8px;">
                    <i class="bi bi-arrow-left"></i> Volver
                </a>
            </div>
        </div>
    </div>
</div>

<style>
    .card-header {
        padding: 1rem;
    }
    
    .card-body {
        padding: 1.5rem;
    }
</style>
{% endblock %}